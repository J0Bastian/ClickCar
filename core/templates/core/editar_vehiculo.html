{% extends "core/base.html" %}
{% load static %}

{% block content %}

<h1 class="titulo-panel" style="text-align:center; margin-bottom:25px;">Editar Vehículo</h1>

<div class="form-container-premium">

<form method="POST" enctype="multipart/form-data" class="form-premium">
    {% csrf_token %}

    <!-- CAMPOS BÁSICOS -->
    <div class="input-group">
        <label>Marca *</label>
        <input type="text" name="marca" value="{{ vehiculo.marca }}" required>
    </div>

    <div class="input-group">
        <label>Modelo *</label>
        <input type="text" name="modelo" value="{{ vehiculo.modelo }}" required>
    </div>

    <div class="input-group">
        <label>Categoría</label>
        <input type="text" name="categoria" value="{{ vehiculo.categoria }}">
    </div>

    <div class="input-group">
        <label>Año</label>
        <input type="number" name="anio" value="{{ vehiculo.anio }}">
    </div>

    <div class="input-group">
        <label>Color *</label>
        <input type="text" name="color" value="{{ vehiculo.color }}" required>
    </div>

    <div class="input-group">
        <label>Asientos *</label>
        <input type="number" name="asientos" value="{{ vehiculo.asientos }}" required>
    </div>

    <div class="input-group">
        <label>Precio por Día *</label>
        <input type="number" step="0.01" name="precio_dia" value="{{ vehiculo.precio_dia }}" required>
    </div>

    <div class="input-group">
        <label>Combustible *</label>
        <input type="text" name="combustible" value="{{ vehiculo.combustible }}" required>
    </div>

    <div class="input-group">
        <label>Descripción</label>
        <textarea name="descripcion">{{ vehiculo.descripcion }}</textarea>
    </div>

    <!-- FOTO ACTUAL -->
    <label style="font-weight:bold; margin-top:15px;">Foto actual:</label>
    <div class="preview-box">
        {% if vehiculo.foto %}
            <img id="preview" src="{{ vehiculo.foto.url }}" class="preview-img">
        {% else %}
            <img id="preview" src="{% static 'img/car_default.png' %}" class="preview-img" style="opacity:0.7;">
        {% endif %}
    </div>

    <!-- NUEVA FOTO -->
    <label style="font-weight:bold;">Nueva foto (opcional)</label>
    <input type="file" name="foto" accept="image/*" onchange="previewImage(event)" class="input-file">

    <button type="submit" class="btn-premium">Guardar Cambios</button>

</form>

</div>

<!-- SCRIPT PARA VISUALIZAR IMAGEN -->
<script>
function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function() {
        document.getElementById("preview").src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
}
</script>


<style>
.form-container-premium {
    max-width: 600px;
    margin: 0 auto;
    padding: 25px;
    background: #ffffff;
    border-radius: 14px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.12);
}

.form-premium .input-group {
    margin-bottom: 15px;
}

.form-premium label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
    color: #333;
}

.form-premium input,
.form-premium textarea,
.input-file {
    width: 100%;
    padding: 12px;
    border: 1px solid #bbb;
    border-radius: 8px;
    font-size: 15px;
}

textarea {
    min-height: 90px;
    resize: vertical;
}

.preview-box {
    width: 100%;
    text-align: center;
    margin-bottom: 15px;
}

.preview-img {
    width: 220px;
    height: 150px;
    border-radius: 12px;
    object-fit: cover;
    border: 3px solid #ddd;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.btn-premium {
    width: 100%;
    padding: 12px;
    margin-top: 15px;
    background: #6c2bf0;
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    transition: .2s;
}

.btn-premium:hover {
    background: #501ec9;
}
</style>

{% endblock %}
